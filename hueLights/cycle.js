var HueApi = require("node-hue-api").HueApi;

var cycle = [[0.3088,0.3212],
[0.3548,0.3489],
[0.17,0.3403],
[0.2138,0.4051],
[0.3059,0.3303],
[0.3402,0.356],
[0.3806,0.3576],
[0.139,0.081],
[0.3695,0.3584],
[0.139,0.081],
[0.245,0.1214],
[0.6399,0.3041],
[0.4236,0.3811],
[0.2211,0.3328],
[0.2682,0.6632],
[0.6009,0.3684],
[0.5763,0.3486],
[0.1905,0.1945],
[0.3511,0.3574],
[0.6531,0.2834],
[0.17,0.3403],
[0.139,0.081],
[0.17,0.3403],
[0.5265,0.4428],
[0.3227,0.329],
[0.214,0.709],
[0.4004,0.4331],
[0.3787,0.1724],
[0.3475,0.5047],
[0.5951,0.3872],
[0.296,0.1409],
[0.7,0.2986],
[0.4837,0.3479],
[0.2924,0.4134],
[0.2206,0.1484],
[0.2239,0.3368],
[0.1693,0.3347],
[0.2742,0.1326],
[0.5454,0.2359],
[0.1576,0.2368],
[0.3227,0.329],
[0.1484,0.1599],
[0.6621,0.3023],
[0.3361,0.3388],
[0.2097,0.6732],
[0.3787,0.1724],
[0.3227,0.329],
[0.3174,0.3207],
[0.4947,0.472],
[0.5136,0.4444],
[0.3227,0.329],
[0.3227,0.329],
[0.214,0.709],
[0.214,0.709],
[0.3298,0.5959],
[0.316,0.3477],
[0.4682,0.2452],
[0.5488,0.3112],
[0.2332,0.1169],
[0.3334,0.3455],
[0.4019,0.4261],
[0.3085,0.3071],
[0.3369,0.3225],
[0.2663,0.6649],
[0.3608,0.3756],
[0.2621,0.3157],
[0.5075,0.3145],
[0.2901,0.3316],
[0.3504,0.3717],
[0.3227,0.329],
[0.2648,0.4901],
[0.4112,0.3091],
[0.5016,0.3531],
[0.1721,0.358],
[0.214,0.2749],
[0.2738,0.297],
[0.276,0.2975],
[0.3436,0.3612],
[0.214,0.709],
[0.2101,0.6765],
[0.3411,0.3387],
[0.3787,0.1724],
[0.5383,0.2566],
[0.7,0.2986],
[0.215,0.4014],
[0.139,0.081],
[0.3365,0.1735],
[0.263,0.1773],
[0.1979,0.5005],
[0.2179,0.1424],
[0.1919,0.524],
[0.176,0.3496],
[0.504,0.2201],
[0.1585,0.0884],
[0.315,0.3363],
[0.3581,0.3284],
[0.3927,0.3732],
[0.4027,0.3757],
[0.139,0.081],
[0.3421,0.344],
[0.4432,0.5154],
[0.354,0.5561],
[0.5614,0.4156],
[0.6726,0.3217],
[0.3688,0.2095],
[0.3751,0.3983],
[0.2675,0.4826],
[0.2539,0.3344],
[0.4658,0.2773],
[0.3591,0.3536],
[0.3953,0.3564],
[0.5305,0.3911],
[0.3944,0.3093],
[0.3495,0.2545],
[0.262,0.3269],
[0.2651,0.1291],
[0.3787,0.1724],
[0.2703,0.1398],
[0.7,0.2986],
[0.4026,0.3227],
[0.1649,0.1338],
[0.5993,0.369],
[0.5346,0.3247],
[0.5104,0.3826],
[0.1968,0.5047],
[0.3397,0.3353],
[0.5714,0.3559],
[0.3227,0.329],
[0.2206,0.2948],
[0.2218,0.1444],
[0.2762,0.3009],
[0.3292,0.3285],
[0.1994,0.5864],
[0.183,0.2325],
[0.4035,0.3772],
[0.17,0.3403],
[0.3342,0.2971],
[0.6112,0.3261],
[0.1732,0.3672],
[0.3644,0.2133],
[0.3852,0.3737],
[0.3227,0.329],
[0.3227,0.329],
[0.4432,0.5154],
[0.3517,0.5618]];
var index = 0;

var light = process.argv[2] || 5;
var hostname = process.env.hueHostname || "192.168.1.2",
    username = process.env.hueUser || "1e1213d83ad8bbf1cddd8835342bcf";

api = new HueApi(hostname, username);


setInterval(function() {
    if (index == cycle.length) index = 0;

    api.lightStatus(light, function(err, l) {
        if (err) console.log(err);
        else {
            console.log(l);
            api.setLightState(light, {
                "on": true
            }, function(err, l) {
                if (err) console.log(err);
                else {
                    api.setLightState(light, {
                        xy: cycle[index]
                    }, function(err, l) {
                        if (err) console.log(err);
                        else
                            console.log(l);
			index++;
                    });
                }
            });
        }
    });
}, 10000);
